<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>M·ªôt ng√†y kh√≥ qu√™n</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    * {
      box-sizing: border-box;
      font-family: "Inter", sans-serif;
    }

    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle at top, #3b0f42 0%, #120014 60%, #050007 100%);
      overflow: hidden;
      color: white;
    }

    body::before {
      content: "";
      position: absolute;
      width: 500px;
      height: 500px;
      background: rgba(255, 100, 200, 0.18);
      filter: blur(120px);
      top: -150px;
      left: -120px;
    }

    body::after {
      content: "";
      position: absolute;
      width: 500px;
      height: 500px;
      background: rgba(140, 80, 255, 0.18);
      filter: blur(120px);
      bottom: -200px;
      right: -200px;
    }

    .screen {
      position: relative;
      width: 340px;
      padding: 28px 22px;
      border-radius: 26px;
      background: rgba(35, 10, 45, 0.75);
      backdrop-filter: blur(18px);
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: 0px 12px 40px rgba(0, 0, 0, 0.55);
      text-align: center;
    }

    .title {
      font-size: 23px;
      font-weight: 700;
      color: #ffd1e8;
      margin-bottom: 18px;
      letter-spacing: 0.2px;
      font-family: cursive;
    }

    /* ====== Step hide/show ====== */
    .step {
      display: none;
    }

    .step.active {
      display: block;
    }

    /* ====== Password Dots ====== */
    .dots {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 22px;
    }

    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.5);
      transition: 0.2s;
    }

    .dot.filled {
      background: white;
      border-color: white;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.6);
    }

    /* ====== Keypad ====== */
    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 10px;
    }

    .btn {
      height: 56px;
      border-radius: 14px;
      border: none;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.08);
      color: rgba(255, 255, 255, 0.92);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: 0.15s;
    }

    .btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: scale(1.03);
    }

    .btn:active {
      transform: scale(0.97);
      background: rgba(255, 255, 255, 0.2);
    }

    .btn.empty {
      background: transparent;
      cursor: default;
    }

    .btn.empty:hover {
      transform: none;
    }

    .btn.delete {
      font-size: 18px;
    }

    /* ====== Message ====== */
    .message {
      margin-top: 18px;
      min-height: 20px;
      font-size: 13px;
      font-weight: 500;
      opacity: 0.9;
    }

    .shake {
      animation: shake 0.35s;
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      20% { transform: translateX(-8px); }
      40% { transform: translateX(8px); }
      60% { transform: translateX(-6px); }
      80% { transform: translateX(6px); }
      100% { transform: translateX(0); }
    }

    .loading {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top: 2px solid white;
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
      margin-left: 8px;
      transform: translateY(3px);
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .footer {
      margin-top: 14px;
      font-size: 11px;
      opacity: 0.55;
    }

    /* ====== QUIZ ====== */
    .quiz-box {
      text-align: left;
      margin-top: 10px;
    }

    .question {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 12px;
      color: rgba(255, 255, 255, 0.95);
    }

    .answers {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .answer-btn {
      width: 100%;
      padding: 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: rgba(255,255,255,0.92);
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: 0.15s;
      text-align: center;
    }

    .answer-btn:hover {
      background: rgba(255,255,255,0.14);
      transform: scale(1.01);
    }

    .answer-btn.correct {
      background: rgba(120, 255, 180, 0.2);
      border-color: rgba(120, 255, 180, 0.4);
    }

    .answer-btn.wrong {
      background: rgba(255, 90, 90, 0.2);
      border-color: rgba(255, 90, 90, 0.4);
    }

    .next-btn {
      margin-top: 14px;
      width: 100%;
      height: 50px;
      border: none;
      border-radius: 14px;
      cursor: pointer;
      font-weight: 700;
      font-size: 14px;
      background: rgba(255, 182, 217, 0.22);
      color: #ffb6d9;
      transition: 0.2s;
      display: none;
    }

    .next-btn:hover {
      background: rgba(255, 182, 217, 0.35);
      transform: scale(1.02);
    }
  </style>
</head>

<body>

  <div class="screen" id="screen">

    <!-- ================= STEP 1: PASSWORD ================= -->
    <div class="step active" id="stepPassword">
      <div class="title">M·ªôt ng√†y kh√≥ qu√™n</div>

      <div class="dots" id="dots">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>

      <div class="keypad">
        <button class="btn" onclick="press('1')">1</button>
        <button class="btn" onclick="press('2')">2</button>
        <button class="btn" onclick="press('3')">3</button>

        <button class="btn" onclick="press('4')">4</button>
        <button class="btn" onclick="press('5')">5</button>
        <button class="btn" onclick="press('6')">6</button>

        <button class="btn" onclick="press('7')">7</button>
        <button class="btn" onclick="press('8')">8</button>
        <button class="btn" onclick="press('9')">9</button>

        <button class="btn empty"></button>

        <button class="btn" onclick="press('0')">0</button>

        <button class="btn delete" onclick="del()">
          <i class="fa-solid fa-delete-left"></i>
        </button>
      </div>

      <div class="message" id="msg"></div>
      <div class="footer">G·ª£i √Ω: Ng√†y k·ª∑ ni·ªám</div>
    </div>

    <!-- ================= STEP 2: QUIZ ================= -->
    <div class="step" id="stepQuiz">
      <div class="title">Quizizz Love</div>

      <div class="quiz-box">
        <div class="question" id="questionText"></div>
        <div class="answers" id="answersBox"></div>

        <button class="next-btn" id="nextBtn" onclick="nextQuestion()">
          Ti·∫øp nh√≥ ‚ûú
        </button>

        <div class="message" id="quizMsg"></div>
      </div>

      <div class="footer">Kh√¥ng ƒë√∫ng kh√¥ng cho qua  üíï</div>
    </div>

    <!-- ================= STEP 3: FINISH ================= -->
    <div class="step" id="stepFinish">
      <div class="title">Gi·ªèi l·∫Øm b√¢y bi </div>
      <div class="message" style="color:#7CFFB3; font-size:14px;">
        C√≥ b·∫•t ng·ªù ƒëang ƒë·∫øn cho b√© ...
        <span class="loading"></span>
      </div>
      <div class="footer">Ch·ªù anh m·ªôt t·∫πo nh√≥ üòç</div>
    </div>

  </div>

  <script>
    // ==============================
    // CONFIG
    // ==============================

    const correctPassword = "1710";

    const redirectURL =
      "https://panbap.github.io/HeartBeat/lovequiz.html?id=eyJsIjoiIiwibSI6IiIsIm4iOiJCw6J5IGJpIMahaSBhbmggY8OzIMSRaeG7gXUgbXXhu5FuIG7Ds2kuLi4uIiwibyI6IkFuaCB0aMawxqFuZyBiw6kgbmhp4buBdSBs4bqvbSAiLCJnIjoiROG6oSBiw6kgbmdoZSEiLCJoIjoiTmdoZSBz4bq9IGPDsyBxdcOgIG5ow7MhIn0%3D";

    // Quiz data (b·∫°n s·ª≠a c√¢u h·ªèi ·ªü ƒë√¢y)
    const quizData = [
      {
        question: "1) Tin nh·∫Øn ƒë·∫ßu ti√™n c·ªßa ch√∫ng m√¨nh l√† g√¨?",
        answers: ["Helu B√®o", "Hellu B√®o", "D√¥ nghi·ªán", "Helu Ti√™uüòí"],
        correct: 0
      },
      {
        question: "2) SetLove l√† ng√†y n√†o?",
        answers: ["18/10", "19/08", "18/09", "B√© hong nh·ªõ"],
        correct: 2
      },
      {
        question: "3) FirstDate m√¨nh ƒë√£ ƒëi ƒë√¢u l√†m g√¨?",
        answers: ["ƒêi c√† ph∆°", "ƒêi t√¥ t∆∞·ª£ng", "Hun nhau", "D·∫° t·∫•t c·∫£ ƒë·ªÅu ƒë√∫ng ·∫°"],
        correct: 3
      },
      {
        question: "4) Em th·∫•y m√¨nh l√† ng∆∞·ªùi nh∆∞ th·∫ø n√†o?",
        answers: ["Qu√° xinh", "Qu√° t√¢m l√Ω", "Y√™u D∆∞∆°ng Minh nh·∫•t", "B√© l·∫•y h·∫øt"],
        correct: 3
      },
    ];

    // ==============================
    // PASSWORD LOGIC
    // ==============================

    let input = "";

    function updateDots() {
      const dots = document.querySelectorAll("#stepPassword .dot");
      dots.forEach((dot, index) => {
        if (index < input.length) dot.classList.add("filled");
        else dot.classList.remove("filled");
      });
    }

    function press(num) {
      if (input.length >= 4) return;

      input += num;
      updateDots();

      if (input.length === 4) {
        checkPassword();
      }
    }

    function del() {
      input = input.slice(0, -1);
      updateDots();
      document.getElementById("msg").innerText = "";
    }

    function resetAll() {
      input = "";
      updateDots();
    }

    function checkPassword() {
      const msg = document.getElementById("msg");
      const screen = document.getElementById("screen");

      if (input === correctPassword) {
        msg.style.color = "#7CFFB3";
        msg.innerHTML = "G√∫t chop ... <span class='loading'></span>";

        setTimeout(() => {
          showStep("stepQuiz");
          startQuiz();
        }, 900);

      } else {
        msg.style.color = "#ff6b6b";
        msg.innerText = "Sai g√≤iüò≠";

        screen.classList.add("shake");

        setTimeout(() => {
          screen.classList.remove("shake");
          resetAll();
          msg.innerText = "";
        }, 900);
      }
    }

    // ==============================
    // STEP CONTROL
    // ==============================

    function showStep(stepId) {
      document.querySelectorAll(".step").forEach(step => step.classList.remove("active"));
      document.getElementById(stepId).classList.add("active");
    }

    // ==============================
    // QUIZ LOGIC
    // ==============================

    let currentQuestion = 0;
    let selected = false;

    function startQuiz() {
      currentQuestion = 0;
      loadQuestion();
    }

    function loadQuestion() {
      selected = false;
      document.getElementById("quizMsg").innerText = "";
      document.getElementById("nextBtn").style.display = "none";

      const q = quizData[currentQuestion];
      document.getElementById("questionText").innerText = q.question;

      const answersBox = document.getElementById("answersBox");
      answersBox.innerHTML = "";

      q.answers.forEach((ans, index) => {
        const btn = document.createElement("button");
        btn.className = "answer-btn";
        btn.innerText = ans;

        btn.onclick = () => chooseAnswer(index, btn);

        answersBox.appendChild(btn);
      });
    }

    function chooseAnswer(index, btn) {
      const q = quizData[currentQuestion];
      const allBtns = document.querySelectorAll(".answer-btn");
    
      // N·∫øu ƒë√£ ƒë√∫ng r·ªìi th√¨ kh√¥ng cho b·∫•m ti·∫øp n·ªØa
      if (selected) return;
    
      if (index === q.correct) {
        selected = true;
    
        btn.classList.add("correct");
        document.getElementById("quizMsg").style.color = "#7CFFB3";
        document.getElementById("quizMsg").innerText = "Hay qu√° ta";
    
        // Disable t·∫•t c·∫£ n√∫t sau khi ƒë√∫ng
        allBtns.forEach(b => b.disabled = true);
    
        document.getElementById("nextBtn").style.display = "block";
    
      } else {
        btn.classList.add("wrong");
    
        document.getElementById("quizMsg").style.color = "#ff6b6b";
        document.getElementById("quizMsg").innerText = "Shao b√© l·∫°i shineüò≠!";
    
        // Sau 600ms t·ª± b·ªè m√†u ƒë·ªè ƒë·ªÉ ch·ªçn l·∫°i
        setTimeout(() => {
          btn.classList.remove("wrong");
          document.getElementById("quizMsg").innerText = "";
        }, 600);
      }
    }


    function nextQuestion() {
      currentQuestion++;

      if (currentQuestion >= quizData.length) {
        finishQuiz();
      } else {
        loadQuestion();
      }
    }

    function finishQuiz() {
      showStep("stepFinish");

      setTimeout(() => {
        window.location.href = redirectURL;
      }, 1500);
    }

    // ==============================
    // Keyboard Support
    // ==============================

    document.addEventListener("keydown", (e) => {
      const isPasswordStep = document.getElementById("stepPassword").classList.contains("active");

      if (isPasswordStep) {
        if (e.key >= "0" && e.key <= "9") press(e.key);
        if (e.key === "Backspace") del();
      }
    });
  </script>

</body>
</html>
